import{m as h,u as k,c as v,V as m}from"./VOverlay-93ac4317.js";import{f as A}from"./forwardRefs-9d31fcaa.js";import{H as S,L as x,I as K,O,N as T,k as p,r as U,aP as I,au as R,a5 as E,K as y,J as N,b as V,bx as $,aM as j,bB as w}from"./main-c40ee4ed.js";import{a as B}from"./VDivider-e4e61359.js";const F=S({id:String,...x(h({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:B}}),["absolute"])},"VMenu"),z=K()({name:"VMenu",props:F(),emits:{"update:modelValue":t=>!0},setup(t,g){let{slots:n}=g;const s=O(t,"modelValue"),{scopeId:P}=k(),b=T(),c=p(()=>t.id||`v-menu-${b}`),l=U(),o=I(v,null),u=R(0);j(v,{register(){++u.value},unregister(){--u.value},closeParents(){setTimeout(()=>{u.value||(s.value=!1,o==null||o.closeParents())},40)}}),E(s,e=>{e?o==null||o.register():o==null||o.unregister()});function D(){o==null||o.closeParents()}function M(e){var a,r;t.disabled||e.key==="Tab"&&(s.value=!1,(r=(a=l.value)==null?void 0:a.activatorEl)==null||r.focus())}function d(e){var r;if(t.disabled)return;const a=(r=l.value)==null?void 0:r.contentEl;a&&s.value?e.key==="ArrowDown"?(e.preventDefault(),w(a,"next")):e.key==="ArrowUp"&&(e.preventDefault(),w(a,"prev")):["ArrowDown","ArrowUp"].includes(e.key)&&(s.value=!0,e.preventDefault(),setTimeout(()=>setTimeout(()=>d(e))))}const C=p(()=>y({"aria-haspopup":"menu","aria-expanded":String(s.value),"aria-owns":c.value,onKeydown:d},t.activatorProps));return N(()=>{const[e]=m.filterProps(t);return V(m,y({ref:l,class:["v-menu",t.class],style:t.style},e,{modelValue:s.value,"onUpdate:modelValue":a=>s.value=a,absolute:!0,activatorProps:C.value,"onClick:outside":D,onKeydown:M},P),{activator:n.activator,default:function(){for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return V($,{root:"VMenu"},{default:()=>{var f;return[(f=n.default)==null?void 0:f.call(n,...r)]}})}})}),A({id:c,Î¨openChildren:u},l)}});export{z as V};
