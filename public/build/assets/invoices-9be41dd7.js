import{aB as o,az as z,bf as w,cr as n}from"./main-70b82271.js";import{l as C}from"./lodash-bc5bedbb.js";import{l as c,a as r}from"./index-628b2924.js";function U(){const t=o(!1),l=o(null);o(null);const D=[{title:"#Invoice ID",key:"invoice_id",sortable:!1},{title:"Customer",key:"customer.name",sortable:!1},{title:"Email",key:"customer.email",sortable:!1},{title:"Total",key:"total",sortable:!1},{title:"Payment Method",key:"payment_method",sortable:!1},{title:"Status",key:"status",sortable:!1},{title:"Due Date",key:"due_date",sortable:!1},{title:"Actions",key:"actions",sortable:!1}],i=z({status:""}),u=o([]),p=o([]),v=o(10),m=o(0),d=o(1),g=o(1),k=[10,25,50,100],f=o(""),h=o("id"),b=o(!0),P=o(null),I=o({}),S=async e=>{try{t.value=!0;const a=await n.delete(c("invoices.destroy",e));l.value=a,r.success(a.data.message)}catch(a){console.log(a),r.error("Error! Deleting invoice")}finally{t.value=!1}},x=async e=>{const a=await n.get(c("invoices.show",e));I.value=a.data.data},B=async(e,a)=>{try{t.value=!0;const s=await n.post(c("invoices.send",e),a);console.log(s),l.value=s,r.success(s.data.message)}catch(s){console.log(s),r.error(s.response.data.message)}finally{t.value=!1}},_=async(e,a)=>{try{t.value=!0;const s=await n.post(c("invoices.update",e),a);l.value=s,r.success(s.data.message)}catch(s){r.error(s.response.data.message)}finally{t.value=!1}},E=async(e,a)=>{try{t.value=!0;const s=await n.post(c("invoices.status",e),a);l.value=s,r.success(s.data.message)}catch(s){console.log(s),s.response.status===422&&r.error(s.response.data.message)}finally{t.value=!1}},A=async e=>{t.value=!0,await n.post(c("invoices.store"),e).then(a=>{l.value=a,r.success(a.data.message)}).catch(a=>{l.value=a,r.error(a.response.data.message)}).finally(()=>{t.value=!1})},y=async()=>{t.value=!0;try{const e=await n.get(c("invoices.index"),{params:{q:f.value,perPage:v.value,page:d.value,sortBy:h.value,sortDesc:b.value,...i}}),{total:a,last_page:s}=e.data.meta;g.value=s,u.value=e.data.data,m.value=a}catch(e){r.error(e.response.data.message)}finally{t.value=!1}},L=async()=>{t.value=!0;try{const e=await n.get(c("invoices.count-by-status"));p.value=e.data.data}catch(e){r.error(e.response.data.message)}finally{t.value=!1}},O=async e=>{t.value=!0;try{const a=await n.get(c("invoices.index"),{params:{...i}});u.value=a.data.data}catch(a){r.error(a.response.data.message)}finally{t.value=!1}},R=e=>e==="Paid"?{variant:"primary",icon:"tabler-circle-check"}:e==="Unpaid"?{variant:"warning",icon:"tabler-chart-pie"}:e==="Downloaded"?{variant:"info",icon:"tabler-arrow-down-circle"}:e==="Draft"?{variant:"secondary",icon:"tabler-device-floppy"}:e==="Sent"?{variant:"success",icon:"tabler-mail"}:e==="Overdue"?{variant:"error",icon:"tabler-alert-circle"}:{variant:"secondary",icon:"tabler-x"},q=C.debounce(()=>{y()},500);return w(f,()=>{q()}),w([d,v],()=>{y()}),{invoiceData:I,isLoading:t,getInvoice:x,invoiceId:P,sortBy:h,itemsPerPage:v,totalPages:g,filters:i,respResult:l,fetchInvoicesByStatus:L,invoices:u,invoicesByStatus:p,fetchInvoices:y,deleteInvoice:S,updateInvoice:_,sendInvoice:B,currentPage:d,searchQuery:f,totalRecords:m,headers:D,isSortDirDesc:b,perPageOptions:k,storeInvoice:A,fetchInvoicesList:O,resolveInvoiceStatusVariantAndIcon:R,updateInvoiceStatus:E}}export{U as u};
