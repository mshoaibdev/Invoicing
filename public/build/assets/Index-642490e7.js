import{_ as be}from"./ConfirmDialog-29549557.js";import{aB as p,az as ye,bf as re,cr as j,am as se,at as N,n as M,bk as s,y as a,bu as te,bt as oe,bp as de,cp as V,b0 as e,cc as W,q as c,bx as k,cf as G,bw as ie,x as K,cq as ue,ac as _e,p as me,de as we,cw as Ue,aG as xe,bv as le,o as X,a5 as J,aU as Y}from"./main-70b82271.js";import{l as Q,a as E}from"./index-628b2924.js";import{l as he}from"./lodash-bc5bedbb.js";import{_ as pe}from"./DialogCloseBtn-478619bf.js";import{u as ce}from"./roles-234c4527.js";import{u as fe}from"./companies-1f6498bb.js";import{V as ve,r as R,e as Ve}from"./validators-f8585958.js";import{a as ee,V as u}from"./VRow-498fad85.js";import{V as ge}from"./VAutocomplete-c6b44a42.js";import{a as ae}from"./filter-73280f75.js";import{V as De}from"./VDataTableServer-09952818.js";import"./_commonjsHelpers-042e6b4d.js";import"./VCheckboxBtn-d416ecdf.js";import"./VSelectionControl-f8a2bfe4.js";import"./VTable-163fc7a0.js";function ne(){const b=p(!1),g=p(null),I=p(null),q=[{title:"Name",key:"name",sortable:!1},{title:"Personal Phone",key:"phone",sortable:!1},{title:"Address",key:"address.address_street_1",sortable:!1},{title:"Zip",key:"address.zip",sortable:!1},{title:"State",key:"address.state",sortable:!1},{title:"City",key:"address.city",sortable:!1},{title:"Country",key:"address.country.name",sortable:!1},{title:"Home Phone",key:"address.phone",sortable:!1},{title:"Role",key:"role",sortable:!1},{title:"Date Added",key:"created_at",sortable:!1},{title:"Actions",key:"actions",sortable:!1}],L=ye({}),x=p([]),h=p(10),T=p(0),C=p(1),O=p(1),H=[10,25,50,100],$=p(""),S=p("id"),_=p(!0),w=p(null),D=p({}),y=p({}),i=()=>{I.value.refresh()},P=async f=>{try{b.value=!0;const d=await j.delete(Q("users.destroy",f));g.value=d,E.success(d.data.message)}catch(d){console.log(d),E.error("Error! Deleting user")}finally{b.value=!1}},z=async f=>{const d=await j.get(Q("users.show",f));D.value=d.data.data},r=async(f,d)=>{try{b.value=!0;const l=await j.post(Q("users.update",d),f);g.value=l,E.success(l.data.message)}catch(l){l.response.status===422&&(y.value=l.response.data.errors),E.error(l.response.data.message)}finally{b.value=!1}},U=async f=>{try{b.value=!0;const d=await j.post(Q("users.status",f.id),f);g.value=d,E.success(d.data.message)}catch(d){console.log(d),E.error(d.response.data.message)}finally{b.value=!1}},v=async f=>{b.value=!0,await j.post(Q("users.store"),f).then(d=>{g.value=d,E.success(d.data.message)}).catch(d=>{g.value=d,E.error(d.response.data.message)}).finally(()=>{b.value=!1})},B=async()=>{b.value=!0;try{const f=await j.get(Q("users.index"),{params:{q:$.value,perPage:h.value,page:C.value,sortBy:S.value,sortDesc:_.value,...L}}),{total:d,last_page:l}=f.data.meta;O.value=l,x.value=f.data.data,T.value=d}catch(f){E.error(f.response.data.message)}finally{b.value=!1}},Z=async f=>{b.value=!0;try{const d=await j.get(Q("users.index"),{params:{...L}});x.value=d.data.data}catch(d){E.error(d.response.data.message)}finally{b.value=!1}},m=f=>["Admin","admin","super admin","Supe Admin","super-admin"].includes(f)?{color:"warning",icon:"tabler-shield-check"}:f==="user"?{color:"success",icon:"tabler-user"}:{color:"primary",icon:"tabler-user"},F=he.debounce(()=>{B()},500);return re($,()=>{F()}),re([C,h],()=>{B()}),{user:D,isLoading:b,errors:y,getUser:z,userId:w,sortBy:S,itemsPerPage:h,totalPages:O,filters:L,respResult:g,users:x,fetchUsers:B,deleteUser:P,refetchData:i,updateUser:r,currentPage:C,searchQuery:$,refListTable:I,totalRecords:T,headers:q,isSortDirDesc:_,perPageOptions:H,storeUser:v,fetchUsersList:Z,updateUserStatus:U,resolveUserRoleVariant:m}}const ke=c("span",{class:"text-h6 font-weight-bold"},"Home Address",-1),Ce=c("span",{class:"text-h6 font-weight-bold"},"Access Level",-1),$e={class:"d-flex"},Pe={class:"d-flex"},Ae={class:"d-flex flex-column justify-center gap-4"},Re={class:"d-flex flex-wrap gap-2"},Ie=c("span",{class:"d-none d-sm-block"},"Upload Avatar",-1),Le=c("span",{class:"d-none d-sm-block"},"Reset",-1),Se=c("p",{class:"text-body-1 mb-0"}," Allowed JPG, GIF or PNG. Max size of 6MB ",-1),Fe={__name:"AddUser",props:{isDialogVisible:{type:Boolean,required:!0}},emits:["refetchData","update:isDialogVisible"],setup(b,{emit:g}){const I=b,{storeUser:q,respResult:L,isLoading:x,errors:h}=ne(),{isLoading:T,fetchRolesList:C,roles:O}=ce(),{isLoading:H,fetchCompaniesList:$,companies:S}=fe(),_=p(),w=p(""),D=p(""),y=p(!1),i={first_name:"",last_name:"",email:"",password:"",password_confirmation:"",phone:"",role_id:"",companies:[],address:{phone:"",address_street_1:"",city:"",state:"",zip:"",country_id:166}},P=p([]),z=async()=>{try{const l=await j.get("/countries");P.value=l.data.data}catch(l){console.log(l)}};se(async()=>{I.isDialogVisible&&(await C(),await $(),await z())});const r=p({...i}),U=p(),v=()=>{r.value={...i},_e(()=>{var l,t;(l=_.value)==null||l.reset(),(t=_.value)==null||t.resetValidation()})},B=async()=>{var l;(l=_.value)==null||l.validate().then(async({valid:t})=>{if(t){const o=new FormData;Object.keys(r.value).forEach(n=>{n==="address"?Object.keys(r.value.address).forEach(A=>{o.append(`address[${A}]`,r.value.address[A]??"")}):n==="companies"?r.value.companies.forEach(A=>{o.append("companies[]",A)}):o.append(n,r.value[n])}),w.value&&o.append("avatar",w.value),await q(o),L.value.status===200&&(g("refetchData"),g("update:isDialogVisible",!1),v())}})},Z=()=>{v(),g("update:isDialogVisible",!1)},m=()=>{const t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let o="";for(let n=0,A=t.length;n<8;++n)o+=t.charAt(Math.floor(Math.random()*A));r.value.password=o,r.value.password_confirmation=o},F=l=>{const t=new FileReader,{files:o}=l.target;o&&o.length&&(t.readAsDataURL(o[0]),w.value=o[0],t.onload=()=>{typeof t.result=="string"&&(D.value=t.result)})},f=()=>{D.value="",w.value=""},d=l=>{g("update:isDialogVisible",l)};return(l,t)=>{const o=pe;return N(),M(ue,{width:l.$vuetify.display.smAndDown?"auto":800,"model-value":I.isDialogVisible,"onUpdate:modelValue":d},{default:s(()=>[a(o,{onClick:t[0]||(t[0]=n=>d(!1))}),a(te,{title:"Add New User"},{default:s(()=>[a(oe,null,{default:s(()=>[a(ve,{ref_key:"refForm",ref:_,onSubmit:de(B,["prevent"])},{default:s(()=>[a(ee,null,{default:s(()=>[a(u,{cols:"12",md:"6"},{default:s(()=>[a(V,{modelValue:e(r).first_name,"onUpdate:modelValue":t[1]||(t[1]=n=>e(r).first_name=n),label:"First Name",rules:[e(R)]},null,8,["modelValue","rules"])]),_:1}),a(u,{cols:"12",md:"6"},{default:s(()=>[a(V,{modelValue:e(r).last_name,"onUpdate:modelValue":t[2]||(t[2]=n=>e(r).last_name=n),label:"Last Name",rules:[e(R)]},null,8,["modelValue","rules"])]),_:1}),a(u,{cols:"12",md:"6"},{default:s(()=>[a(V,{modelValue:e(r).email,"onUpdate:modelValue":t[3]||(t[3]=n=>e(r).email=n),label:"Email",rules:[e(R),e(Ve)]},null,8,["modelValue","rules"])]),_:1}),a(u,{cols:"12",md:"6"},{default:s(()=>[a(V,{modelValue:e(r).phone,"onUpdate:modelValue":t[4]||(t[4]=n=>e(r).phone=n),label:"Personal Phone Number",name:"phone"},null,8,["modelValue"])]),_:1}),a(u,{cols:"12",md:"12"},{default:s(()=>[ke,a(W)]),_:1}),a(u,{cols:"12",md:"6"},{default:s(()=>[a(V,{modelValue:e(r).address.phone,"onUpdate:modelValue":t[5]||(t[5]=n=>e(r).address.phone=n),label:"Home Phone"},null,8,["modelValue"])]),_:1}),a(u,{cols:"12",md:"6"},{default:s(()=>[a(V,{modelValue:e(r).address.address_street_1,"onUpdate:modelValue":t[6]||(t[6]=n=>e(r).address.address_street_1=n),label:"Street 1"},null,8,["modelValue"])]),_:1}),a(u,{cols:"12",md:"6"},{default:s(()=>[a(V,{modelValue:e(r).address.city,"onUpdate:modelValue":t[7]||(t[7]=n=>e(r).address.city=n),label:"City"},null,8,["modelValue"])]),_:1}),a(u,{cols:"12",md:"6"},{default:s(()=>[a(V,{modelValue:e(r).address.state,"onUpdate:modelValue":t[8]||(t[8]=n=>e(r).address.state=n),label:"State"},null,8,["modelValue"])]),_:1}),a(u,{cols:"12",md:"6"},{default:s(()=>[a(V,{modelValue:e(r).address.zip,"onUpdate:modelValue":t[9]||(t[9]=n=>e(r).address.zip=n),label:"Zip"},null,8,["modelValue"])]),_:1}),a(u,{cols:"12",md:"6"},{default:s(()=>[a(ge,{modelValue:e(r).address.country_id,"onUpdate:modelValue":t[10]||(t[10]=n=>e(r).address.country_id=n),label:"Country","item-title":"name","item-value":"id",items:e(P)},null,8,["modelValue","items"])]),_:1}),a(u,{cols:"12",md:"12"},{default:s(()=>[a(ae,{modelValue:e(r).companies,"onUpdate:modelValue":t[11]||(t[11]=n=>e(r).companies=n),label:"Select Company","item-title":"name","item-value":"id",multiple:"",items:e(S),loading:e(H),rules:[e(R)]},null,8,["modelValue","items","loading","rules"])]),_:1}),a(W,{class:"my-4"}),a(u,{cols:"12",md:"12"},{default:s(()=>[Ce,a(W)]),_:1}),a(u,{cols:"12",md:"6"},{default:s(()=>[a(ae,{modelValue:e(r).role_id,"onUpdate:modelValue":t[12]||(t[12]=n=>e(r).role_id=n),label:"Role","item-title":"name","item-value":"id",items:e(O),loading:e(T),rules:[e(R)]},null,8,["modelValue","items","loading","rules"])]),_:1}),a(u,{cols:"12",md:"6"},{default:s(()=>[c("div",$e,[a(V,{modelValue:e(r).password,"onUpdate:modelValue":t[13]||(t[13]=n=>e(r).password=n),label:"Password",rules:[e(R)],"error-messages":e(h).password,type:e(y)?"text":"password","append-inner-icon":e(y)?"tabler-eye-off":"tabler-eye","onClick:appendInner":t[14]||(t[14]=n=>y.value=!e(y))},null,8,["modelValue","rules","error-messages","type","append-inner-icon"]),a(k,{color:"primary",class:"ml-2",onClick:m},{default:s(()=>[a(G,{icon:"tabler-refresh"})]),_:1})])]),_:1}),a(u,{cols:"12",md:"6"},{default:s(()=>[a(V,{modelValue:e(r).password_confirmation,"onUpdate:modelValue":t[15]||(t[15]=n=>e(r).password_confirmation=n),label:"Confirm Password",rules:[e(R)],"error-messages":e(h).password_confirmation,type:e(y)?"text":"password","append-inner-icon":e(y)?"tabler-eye-off":"tabler-eye","onClick:appendInner":t[16]||(t[16]=n=>y.value=!e(y))},null,8,["modelValue","rules","error-messages","type","append-inner-icon"])]),_:1}),a(u,{cols:"12",md:"12"},{default:s(()=>[c("div",Pe,[a(ie,{rounded:"",size:"120",class:"me-6 border",image:e(D)},null,8,["image"]),c("div",Ae,[c("div",Re,[a(k,{color:"primary",onClick:t[17]||(t[17]=n=>{var A;return(A=e(U))==null?void 0:A.click()})},{default:s(()=>[a(G,{icon:"tabler-cloud-upload",class:"d-sm-none"}),Ie]),_:1}),c("input",{ref_key:"refInputEl",ref:U,type:"file",accept:".jpeg,.png,.jpg,GIF",hidden:"",onInput:F},null,544),a(k,{type:"button",color:"secondary",variant:"tonal",onClick:f},{default:s(()=>[Le,a(G,{icon:"tabler-refresh",class:"d-sm-none"})]),_:1})]),Se])])]),_:1}),a(u,{cols:"12",class:"d-flex flex-wrap gap-4 justify-end"},{default:s(()=>[a(k,{type:"submit",loading:e(x),disabled:e(x),onClick:t[18]||(t[18]=n=>{var A;return(A=e(_))==null?void 0:A.validate()})},{default:s(()=>[K(" Submit ")]),_:1},8,["loading","disabled"]),a(k,{color:"secondary",variant:"tonal",onClick:Z},{default:s(()=>[K(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1},8,["width","model-value"])}}},Ne=c("span",{class:"text-h6 font-weight-bold"},"Home Address",-1),ze=c("span",{class:"text-h6 font-weight-bold"},"Access Level",-1),Ee={class:"d-flex"},Be={class:"d-flex"},je={class:"d-flex flex-column justify-center gap-4"},Me={class:"d-flex flex-wrap gap-2"},Ge=c("span",{class:"d-none d-sm-block"},"Upload Avatar",-1),qe=c("span",{class:"d-none d-sm-block"},"Reset",-1),Te=c("p",{class:"text-body-1 mb-0"}," Allowed JPG, GIF or PNG. Max size of 6MB ",-1),Oe={key:1,class:"text-center pa-12"},He={__name:"EditUser",props:{isDialogVisible:{type:Boolean,required:!0},userId:{type:Number,required:!0}},emits:["refetchData","update:isDialogVisible"],setup(b,{emit:g}){const I=b,{updateUser:q,respResult:L,isLoading:x,errors:h,getUser:T,user:C}=ne(),{isLoading:O,fetchRolesList:H,roles:$}=ce(),{isLoading:S,fetchCompaniesList:_,companies:w}=fe(),D=p(),y=p(),i=p({});p({});const P=p(""),z=p(""),r=p(!1),U=p([]),v=async()=>{try{const d=await j.get("/countries");U.value=d.data.data}catch(d){console.log(d)}};se(async()=>{var d;I.isDialogVisible&&(await T(I.userId),await H(),await _(),await v(),i.value={...C.value,role_id:(d=C.value.roles[0])==null?void 0:d.id,companies:C.value.companies.map(l=>l.id)},z.value=C.value.avatar_url)});const B=()=>{const l="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let t="";for(let o=0,n=l.length;o<8;++o)t+=l.charAt(Math.floor(Math.random()*n));i.value.password=t,i.value.password_confirmation=t},Z=async()=>{var d;(d=D.value)==null||d.validate().then(async({valid:l})=>{if(l){const t=new FormData;Object.keys(i.value).forEach(o=>{o==="address"?Object.keys(i.value.address).forEach(n=>{t.append(`address[${n}]`,i.value.address[n]??"")}):o==="companies"?i.value.companies.forEach(n=>{t.append("companies[]",n)}):t.append(o,i.value[o])}),P.value&&(t.append("avatar",P.value),t.append("is_avatar_removed",!0)),t.append("_method","PUT"),await q(t,i.value.id),L.value.status===200&&(g("refetchData"),g("update:isDialogVisible",!1))}})},m=d=>{const l=new FileReader,{files:t}=d.target;t&&t.length&&(l.readAsDataURL(t[0]),P.value=t[0],l.onload=()=>{typeof l.result=="string"&&(z.value=l.result)})},F=()=>{P.value="",z.value=C.value.avatar_url},f=d=>{g("update:isDialogVisible",d)};return(d,l)=>{const t=pe;return N(),M(ue,{width:d.$vuetify.display.smAndDown?"auto":800,"model-value":I.isDialogVisible,"onUpdate:modelValue":f},{default:s(()=>[a(t,{onClick:l[0]||(l[0]=o=>f(!1))}),a(te,{title:"Update User"},{default:s(()=>[e(i).address?(N(),M(oe,{key:0},{default:s(()=>[a(ve,{ref_key:"refForm",ref:D,onSubmit:de(Z,["prevent"])},{default:s(()=>[a(ee,null,{default:s(()=>[a(u,{cols:"12",md:"6"},{default:s(()=>[a(V,{modelValue:e(i).first_name,"onUpdate:modelValue":l[1]||(l[1]=o=>e(i).first_name=o),label:"First Name",rules:[e(R)]},null,8,["modelValue","rules"])]),_:1}),a(u,{cols:"12",md:"6"},{default:s(()=>[a(V,{modelValue:e(i).last_name,"onUpdate:modelValue":l[2]||(l[2]=o=>e(i).last_name=o),label:"Last Name",rules:[e(R)]},null,8,["modelValue","rules"])]),_:1}),a(u,{cols:"12",md:"6"},{default:s(()=>[a(V,{modelValue:e(i).email,"onUpdate:modelValue":l[3]||(l[3]=o=>e(i).email=o),label:"Email",rules:[e(R),e(Ve)]},null,8,["modelValue","rules"])]),_:1}),a(u,{cols:"12",md:"6"},{default:s(()=>[a(V,{modelValue:e(i).phone,"onUpdate:modelValue":l[4]||(l[4]=o=>e(i).phone=o),label:"Personal Phone Number",name:"phone"},null,8,["modelValue"])]),_:1}),a(u,{cols:"12",md:"12"},{default:s(()=>[Ne,a(W)]),_:1}),a(u,{cols:"12",md:"6"},{default:s(()=>[a(V,{modelValue:e(i).address.phone,"onUpdate:modelValue":l[5]||(l[5]=o=>e(i).address.phone=o),label:"Home Phone"},null,8,["modelValue"])]),_:1}),a(u,{cols:"12",md:"6"},{default:s(()=>[a(V,{modelValue:e(i).address.address_street_1,"onUpdate:modelValue":l[6]||(l[6]=o=>e(i).address.address_street_1=o),label:"Street 1"},null,8,["modelValue"])]),_:1}),a(u,{cols:"12",md:"6"},{default:s(()=>[a(V,{modelValue:e(i).address.city,"onUpdate:modelValue":l[7]||(l[7]=o=>e(i).address.city=o),label:"City"},null,8,["modelValue"])]),_:1}),a(u,{cols:"12",md:"6"},{default:s(()=>[a(V,{modelValue:e(i).address.state,"onUpdate:modelValue":l[8]||(l[8]=o=>e(i).address.state=o),label:"State"},null,8,["modelValue"])]),_:1}),a(u,{cols:"12",md:"6"},{default:s(()=>[a(V,{modelValue:e(i).address.zip,"onUpdate:modelValue":l[9]||(l[9]=o=>e(i).address.zip=o),label:"Zip"},null,8,["modelValue"])]),_:1}),a(u,{cols:"12",md:"6"},{default:s(()=>[a(ge,{modelValue:e(i).address.country_id,"onUpdate:modelValue":l[10]||(l[10]=o=>e(i).address.country_id=o),label:"Country","item-title":"name","item-value":"id",items:e(U)},null,8,["modelValue","items"])]),_:1}),a(u,{cols:"12",md:"12"},{default:s(()=>[a(ae,{modelValue:e(i).companies,"onUpdate:modelValue":l[11]||(l[11]=o=>e(i).companies=o),label:"Select Company","item-title":"name","item-value":"id",multiple:"",items:e(w),loading:e(S),rules:[e(R)]},null,8,["modelValue","items","loading","rules"])]),_:1}),a(W,{class:"my-4"}),a(u,{cols:"12",md:"12"},{default:s(()=>[ze,a(W)]),_:1}),a(u,{cols:"12",md:"6"},{default:s(()=>[a(ae,{modelValue:e(i).role_id,"onUpdate:modelValue":l[12]||(l[12]=o=>e(i).role_id=o),label:"Role","item-title":"name","item-value":"id",items:e($),loading:e(O),rules:[e(R)]},null,8,["modelValue","items","loading","rules"])]),_:1}),a(u,{cols:"12",md:"6"},{default:s(()=>[c("div",Ee,[a(V,{modelValue:e(i).password,"onUpdate:modelValue":l[13]||(l[13]=o=>e(i).password=o),label:"Password","error-messages":e(h).password,type:e(r)?"text":"password","append-inner-icon":e(r)?"tabler-eye-off":"tabler-eye","onClick:appendInner":l[14]||(l[14]=o=>r.value=!e(r))},null,8,["modelValue","error-messages","type","append-inner-icon"]),a(k,{color:"primary",class:"ml-2",onClick:B},{default:s(()=>[a(G,{icon:"tabler-refresh"})]),_:1})])]),_:1}),a(u,{cols:"12",md:"6"},{default:s(()=>[a(V,{modelValue:e(i).password_confirmation,"onUpdate:modelValue":l[15]||(l[15]=o=>e(i).password_confirmation=o),label:"Confirm Password","error-messages":e(h).password_confirmation,type:e(r)?"text":"password","append-inner-icon":e(r)?"tabler-eye-off":"tabler-eye","onClick:appendInner":l[16]||(l[16]=o=>r.value=!e(r))},null,8,["modelValue","error-messages","type","append-inner-icon"])]),_:1}),a(u,{cols:"12",md:"12"},{default:s(()=>[c("div",Be,[a(ie,{rounded:"",size:"120",class:"me-6 border",image:e(z)},null,8,["image"]),c("div",je,[c("div",Me,[a(k,{color:"primary",onClick:l[17]||(l[17]=o=>{var n;return(n=e(y))==null?void 0:n.click()})},{default:s(()=>[a(G,{icon:"tabler-cloud-upload",class:"d-sm-none"}),Ge]),_:1}),c("input",{ref_key:"refInputEl",ref:y,type:"file",accept:".jpeg,.png,.jpg,GIF",hidden:"",onInput:m},null,544),a(k,{type:"button",color:"secondary",variant:"tonal",onClick:F},{default:s(()=>[qe,a(G,{icon:"tabler-refresh",class:"d-sm-none"})]),_:1})]),Te])])]),_:1}),a(u,{cols:"12",class:"d-flex flex-wrap gap-4 justify-end"},{default:s(()=>[a(k,{type:"submit",loading:e(x),disabled:e(x),onClick:l[18]||(l[18]=o=>{var n;return(n=e(D))==null?void 0:n.validate()})},{default:s(()=>[K(" Update User ")]),_:1},8,["loading","disabled"]),a(k,{color:"secondary",variant:"tonal",onClick:l[19]||(l[19]=o=>f(!1))},{default:s(()=>[K(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})):(N(),me("div",Oe,[a(we,{width:3,size:70,indeterminate:""})]))]),_:1})]),_:1},8,["width","model-value"])}}};const Ze=["href"],Je={class:"text-capitalize text-base"},Qe=["href"],We={class:"d-flex align-center justify-space-between"},Xe={class:"d-flex flex-column"},Ye={class:"text-base"},Ke={class:"text-sm text-disabled"},ea=["href"],aa={__name:"Index",setup(b){const{fetchUsers:g,users:I,headers:q,searchQuery:L,itemsPerPage:x,currentPage:h,deleteUser:T,resolveUserRoleVariant:C,isLoading:O,totalRecords:H}=ne(),$=p(""),S=p(!1),_=p(!1),w=p(!1),D=p(!1),y=p([]),i=p([]);se(()=>{window.innerWidth<768&&(i.value=q.slice(0,1),D.value=!0),g()});const P=U=>{$.value=U,w.value=!0},z=async U=>{U&&(await T($.value),g())},r=U=>{$.value=U,S.value=!0};return(U,v)=>{const B=xe("IconBtn"),Z=be;return N(),me("section",null,[a(ee,null,{default:s(()=>[a(u,{cols:"12"},{default:s(()=>[a(te,{title:"Users"},{default:s(()=>[a(oe,{class:"d-flex flex-wrap py-4 gap-4"},{default:s(()=>[a(ee,null,{default:s(()=>[a(u,{lg:"3",md:"3",sm:"3",cols:"12"},{default:s(()=>[e(le).can("Create","users-create")?(N(),M(k,{key:0,"prepend-icon":"tabler-plus",onClick:v[0]||(v[0]=m=>_.value=!0)},{default:s(()=>[K(" Add New User ")]),_:1})):X("",!0)]),_:1}),a(u,{lg:"6",md:"6",sm:"6",cols:"12"}),a(u,{lg:"3",md:"3",sm:"3",cols:"12"},{default:s(()=>[a(V,{modelValue:e(L),"onUpdate:modelValue":v[1]||(v[1]=m=>J(L)?L.value=m:null),placeholder:"Search",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(W),a(e(De),{modelValue:e(y),"onUpdate:modelValue":v[2]||(v[2]=m=>J(y)?y.value=m:null),"items-per-page":e(x),"onUpdate:itemsPerPage":v[3]||(v[3]=m=>J(x)?x.value=m:null),page:e(h),"onUpdate:page":v[4]||(v[4]=m=>J(h)?h.value=m:null),loading:e(O),"items-length":e(H),headers:e(q),items:e(I),class:"text-no-wrap"},{"item.email":s(({item:m})=>[c("a",{href:`mailto:${m.raw.customer.email}`,class:"text-decoration-none"},Y(m.raw.customer.email),9,Ze)]),"item.role":s(({item:m})=>{var F;return[c("span",Je,Y((F=m.raw.roles[0])==null?void 0:F.name),1)]}),"item.phone":s(({item:m})=>[c("a",{href:`tel:${m.raw.phone}`,class:"text-decoration-none"},Y(m.raw.phone),9,Qe)]),"item.name":s(({item:m})=>[c("div",We,[c("div",Xe,[c("h6",Ye,Y(m.raw.name),1),c("span",Ke,[c("a",{href:`mailto:${m.raw.email}`,class:"text-decoration-none"},Y(m.raw.email),9,ea)])]),e(D)?(N(),M(B,{key:0,onClick:F=>P(m.raw.id)},{default:s(()=>[a(G,{icon:"tabler-pencil"})]),_:2},1032,["onClick"])):X("",!0)])]),"item.actions":s(({item:m})=>[e(le).can("Delete","users-delete")?(N(),M(k,{key:0,icon:"",variant:"text",color:"default",size:"x-small",onClick:F=>r(m.raw.id)},{default:s(()=>[a(G,{size:"22",icon:"tabler-trash"})]),_:2},1032,["onClick"])):X("",!0),e(le).can("Update","users-edit")?(N(),M(k,{key:1,icon:"",variant:"text",color:"default",size:"x-small",onClick:F=>P(m.raw.id)},{default:s(()=>[a(G,{size:"22",icon:"tabler-pencil"})]),_:2},1032,["onClick"])):X("",!0)]),_:1},8,["modelValue","items-per-page","page","loading","items-length","headers","items"])]),_:1})]),_:1})]),_:1}),e(_)?(N(),M(Fe,{key:0,isDialogVisible:e(_),"onUpdate:isDialogVisible":v[5]||(v[5]=m=>J(_)?_.value=m:null),onRefetchData:e(g)},null,8,["isDialogVisible","onRefetchData"])):X("",!0),e(w)?(N(),M(He,{key:1,isDialogVisible:e(w),"onUpdate:isDialogVisible":v[6]||(v[6]=m=>J(w)?w.value=m:null),"user-id":e($),onRefetchData:e(g)},null,8,["isDialogVisible","user-id","onRefetchData"])):X("",!0),a(Z,{isDialogVisible:e(S),"onUpdate:isDialogVisible":v[7]||(v[7]=m=>J(S)?S.value=m:null),"cancel-title":"Cancelled","confirm-title":"Deleted","confirm-msg":"role deleted successfully.","confirmation-question":"Are you sure you want to delete user, This action is irreversible?","cancel-msg":"user deletion cancelled.",onConfirm:z},null,8,["isDialogVisible"])])}}},ba=Ue(aa,[["__scopeId","data-v-e45066a4"]]);export{ba as default};
