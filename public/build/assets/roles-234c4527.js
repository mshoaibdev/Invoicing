import{aB as s,az as A,l as C,bf as E,cr as l}from"./main-70b82271.js";import{l as n,a as r}from"./index-628b2924.js";function Q(){const t=s(!1),c=s(null),g=s(null),x=s([{label:"Name"},{label:"Assigned Permissions"}]),d=A({}),u=s([]),i=s(10),p=s(0),v=s(1),m=s(1),D=[10,25,50,100],f=s(""),y=s("id"),h=s(!0),P=s(null),R=s({}),w=s({}),I=C(()=>{const a=u.value.length?(v.value-1)*i.value+1:0,e=u.value.length+(v.value-1)*i.value;return`Showing ${a} to ${e} of ${p.value} entries`}),$=()=>{g.value.refresh()},B=async a=>{try{t.value=!0;const e=await l.delete(n("roles.destroy",a));c.value=e,r.success(e.data.message)}catch(e){console.log(e),r.error("Error! Deleting role")}finally{t.value=!1}},L=async a=>{const e=await l.get(n("roles.show",a));R.value=e.data.data},S=async(a,e)=>{try{t.value=!0;const o=await l.post(n("roles.update",e),a);c.value=o,r.success(o.data.message)}catch(o){o.response.status===422&&(w.value=o.response.data.errors),r.error(o.response.data.message)}finally{t.value=!1}},k=async a=>{t.value=!0,await l.post(n("roles.store"),a).then(e=>{c.value=e,r.success(e.data.message)}).catch(e=>{c.value=e,e.response.status===422&&r.error(e.response.data.message)}).finally(()=>{t.value=!1})},b=async()=>{t.value=!0;try{const a=await l.get(n("roles.index"),{params:{q:f.value,perPage:i.value,page:v.value,sortBy:y.value,sortDesc:h.value,...d}}),{total:e,last_page:o}=a.data.meta;m.value=o,u.value=a.data.data,p.value=e}catch(a){r.error(a.response.data.message)}finally{t.value=!1}},q=async a=>{t.value=!0;try{const e=await l.get(n("roles.index"),{params:{...d}});u.value=e.data.data}catch(e){r.error(e.response.data.message)}finally{t.value=!1}},z=a=>a==="admin"?{color:"warning",icon:"tabler-shield-check"}:a==="user"?{color:"success",icon:"tabler-role"}:{color:"primary",icon:"tabler-role"};return E([v,i,f,d],()=>{b()}),{role:R,isLoading:t,errors:w,getRole:L,roleId:P,sortBy:y,perPage:i,totalPages:m,filters:d,paginationData:I,respResult:c,roles:u,fetchRoles:b,deleteRole:B,refetchData:$,updateRole:S,storeRole:k,currentPage:v,searchQuery:f,refListTable:g,totalRecords:p,tableColumns:x,isSortDirDesc:h,fetchRolesList:q,perPageOptions:D,resolveRoleRoleVariant:z}}export{Q as u};
