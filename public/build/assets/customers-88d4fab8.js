import{aB as r,az as M,bf as P,cr as l}from"./main-70b82271.js";import{l as N}from"./lodash-bc5bedbb.js";import{l as c,a as o}from"./index-628b2924.js";function $(){const t=r(!1),u=r(null);r(null);const D=[{title:"Name",key:"name",sortable:!1,visible:!0},{title:"Phone",key:"billing.phone",sortable:!1,visible:!0},{title:"State",key:"billing.state",sortable:!1,visible:!0},{title:"Actions",key:"actions",sortable:!1,visible:!0}],n=M({status:""}),i=r([]),f=r([]),m=r(10),y=r(0),d=r(1),g=r(1),S=[10,25,50,100],v=r(""),h=r("id"),b=r(!0),B=r(null),w=r({}),C=r({}),k=async s=>{try{t.value=!0;const e=await l.delete(c("customers.destroy",s));u.value=e,o.success(e.data.message)}catch(e){console.log(e),o.error("Error! Deleting customer")}finally{t.value=!1}},x=async s=>{try{t.value=!0;const e=await l.post(c("customers.delete"),{ids:s});u.value=e,o.success(e.data.message)}catch(e){console.log(e),o.error("Error! Deleting customer")}finally{t.value=!1}},E=async s=>{const e=await l.get(c("customers.show",s));w.value=e.data.data},I=async(s,e)=>{try{t.value=!0;const a=await l.post(c("customers.update",s),e);u.value=a,o.success(a.data.message)}catch(a){a.response.status===422&&(C.value=a.response.data.errors),o.error(a.response.data.message)}finally{t.value=!1}},L=async(s,e)=>{try{t.value=!0;const a=await l.post(c("customers.status",s),e);u.value=a,o.success(a.data.message)}catch(a){console.log(a),a.response.status===422&&o.error(a.response.data.message)}finally{t.value=!1}},R=async s=>{t.value=!0,await l.post(c("customers.store"),s).then(e=>{u.value=e,o.success(e.data.message)}).catch(e=>{u.value=e,e.response.status===422&&o.error(e.response.data.message)}).finally(()=>{t.value=!1})},p=async()=>{t.value=!0;try{const s=await l.get(c("customers.index"),{params:{q:v.value,perPage:m.value,page:d.value,sortBy:h.value,sortDesc:b.value,...n}}),{total:e,last_page:a}=s.data.meta;g.value=a,i.value=s.data.data,y.value=e}catch(s){o.error(s.response.data.message)}finally{t.value=!1}},q=async()=>{t.value=!0;try{const s=await l.get(c("customers.count-by-status"));f.value=s.data.data}catch(s){o.error(s.response.data.message)}finally{t.value=!1}},z=async s=>{t.value=!0;try{const e=await l.get(c("fetch-customers"),{params:{...n}});i.value=e.data.data}catch(e){o.error(e.response.data.message)}finally{t.value=!1}},A=N.debounce(()=>{p()},500);return P(v,()=>{A()}),P([d,m,n],()=>{p()}),{customerData:w,isLoading:t,errors:C,getCustomer:E,customerId:B,sortBy:h,itemsPerPage:m,totalPages:g,filters:n,respResult:u,fetchCustomersByStatus:q,customers:i,customersByStatus:f,fetchCustomers:p,deleteMultipleCustomer:x,deleteCustomer:k,updateCustomer:I,currentPage:d,searchQuery:v,totalRecords:y,headers:D,isSortDirDesc:b,perPageOptions:S,storeCustomer:R,fetchCustomersList:z,updateCustomerStatus:L}}export{$ as u};
