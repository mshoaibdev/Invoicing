import{_ as ee}from"./AppTextField-2e476594.js";import{u as te}from"./customers-88d4fab8.js";import{u as ae}from"./invoices-9be41dd7.js";import{f as oe}from"./formatters-12413ec5.js";import{cw as le,d7 as se,aB as y,am as ne,aG as ie,at as u,p as M,y as o,bk as a,bt as x,q as e,aU as s,b0 as l,bu as j,bv as q,n as h,bx as re,x as _,o as k,a5 as g,cc as ce,bw as F,by as de,cz as ue,ab as _e,cf as d,cv as me,cs as pe,cu as p,ax as fe,au as ve}from"./main-70b82271.js";import{a as G,V as D}from"./VRow-498fad85.js";import{V as he}from"./VTable-163fc7a0.js";import{V as ge}from"./VDataTableServer-09952818.js";import"./lodash-bc5bedbb.js";import"./_commonjsHelpers-042e6b4d.js";import"./index-628b2924.js";import"./filter-73280f75.js";import"./VCheckboxBtn-d416ecdf.js";import"./VSelectionControl-f8a2bfe4.js";const r=f=>(fe("data-v-9c51a6fe"),f=f(),ve(),f),we=r(()=>e("p",{class:"text-sm text-uppercase text-disabled"}," Customer Details ",-1)),be=r(()=>e("th",null," Customer Name: ",-1)),Ie=r(()=>e("th",null," Email: ",-1)),Ve=["href"],Ce=r(()=>e("th",null," Phone: ",-1)),ye=["href"],xe=r(()=>e("tr",null,[e("th",null," Billing Address : "),e("td")],-1)),ke=r(()=>e("th",null," Name ",-1)),De=r(()=>e("th",null," Address ",-1)),Be=r(()=>e("th",null," City ",-1)),Se=r(()=>e("th",null," State ",-1)),$e=r(()=>e("th",null," Zip ",-1)),Pe=r(()=>e("th",null," Date Added: ",-1)),Ae={class:"me-3 d-flex gap-3"},Ne={class:"d-flex align-center"},Te={key:1},ze={class:"d-flex flex-column"},Re={class:"text-base"},Ue={class:"text-sm text-disabled"},Ee=["href"],Le=["href"],Me={class:"d-flex align-center"},je={class:"me-3"},qe={class:"d-flex align-center"},Fe={class:"mb-0"},Ge={class:"d-flex align-center"},Qe=["onClick"],Ze={__name:"CustomerInvoices",emits:["update:isDialogVisible","editCustomer","deleteCustomer"],setup(f,{emit:He}){const w=se().params.id;console.log(w);const{invoices:Q,totalRecords:Z,isLoading:H,fetchInvoices:J,currentPage:b,headers:K,deleteInvoice:Ke,itemsPerPage:I,searchQuery:V,paginationData:Oe,filters:O,resolveInvoiceStatusVariantAndIcon:B}=ae(),C=y([]);y(0),y({});const{getCustomer:W,customerData:n}=te();return ne(async()=>{O.customerId=w,await W(w),await J()}),(v,c)=>{const X=ee,Y=ie("IconBtn");return u(),M("div",null,[o(j,null,{default:a(()=>[o(x,null,{default:a(()=>[o(G,null,{default:a(()=>[o(D,{cols:"12",lg:"12",md:"12",sm:"12"},{default:a(()=>[we,o(he,null,{default:a(()=>{var t,i,m,S,$,P,A,N,T,z,R,U,E,L;return[e("tbody",null,[e("tr",null,[be,e("td",null,s(l(n).name),1)]),e("tr",null,[Ie,e("td",null,[e("a",{href:`mailto:${l(n).email}`},s(l(n).email),9,Ve)])]),e("tr",null,[Ce,e("td",null,[e("a",{href:`tel:${(i=(t=l(n))==null?void 0:t.billing)==null?void 0:i.phone}`},s((S=(m=l(n))==null?void 0:m.billing)==null?void 0:S.phone),9,ye)])]),xe,e("tr",null,[ke,e("td",null,s((P=($=l(n))==null?void 0:$.billing)==null?void 0:P.name),1)]),e("tr",null,[De,e("td",null,s((N=(A=l(n))==null?void 0:A.billing)==null?void 0:N.address_street_1),1)]),e("tr",null,[Be,e("td",null,s((z=(T=l(n))==null?void 0:T.billing)==null?void 0:z.city),1)]),e("tr",null,[Se,e("td",null,s((U=(R=l(n))==null?void 0:R.billing)==null?void 0:U.state),1)]),e("tr",null,[$e,e("td",null,s((L=(E=l(n))==null?void 0:E.billing)==null?void 0:L.zip),1)]),e("tr",null,[Pe,e("td",null,s(l(n).created_at),1)])])]}),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),o(j,{class:"mt-4"},{default:a(()=>[o(x,{class:"d-flex align-center flex-wrap gap-4"},{default:a(()=>[o(G,null,{default:a(()=>[o(D,{lg:"3",md:"3",sm:"4",cols:"12"},{default:a(()=>[e("div",Ae,[l(q).can("Create","invoices-create")?(u(),h(re,{key:0,"prepend-icon":"tabler-plus",to:{name:"create-invoice"}},{default:a(()=>[_(" Create Invoice ")]),_:1})):k("",!0)])]),_:1}),o(D,{offset:"6",lg:"3",md:"3",cols:"12",sm:"6"},{default:a(()=>[o(X,{modelValue:l(V),"onUpdate:modelValue":c[0]||(c[0]=t=>g(V)?V.value=t:null),label:"Search Invoices",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),o(ce),o(x,{title:"Invoices"},{default:a(()=>[o(l(ge),{modelValue:l(C),"onUpdate:modelValue":c[1]||(c[1]=t=>g(C)?C.value=t:null),"items-per-page":l(I),"onUpdate:itemsPerPage":c[2]||(c[2]=t=>g(I)?I.value=t:null),page:l(b),"onUpdate:page":c[3]||(c[3]=t=>g(b)?b.value=t:null),loading:l(H),"items-length":l(Z),headers:l(K),items:l(Q),class:"text-no-wrap"},{"item.invoice_id":a(({item:t})=>{var i;return[e("div",Ne,[o(F,{variant:"tonal",class:"me-3",size:"38",color:"primary"},{default:a(()=>{var m;return[t.raw.company?(u(),h(de,{key:0,src:t.raw.company.logo_url},null,8,["src"])):(u(),M("span",Te,s((m=t.raw.company)==null?void 0:m.name),1))]}),_:2},1024),e("div",ze,[e("h6",Re,s((i=t.raw.company)==null?void 0:i.name),1),e("span",Ue,s(t.raw.invoice_id),1)])])]}),"item.customer.email":a(({item:t})=>[e("a",{href:`mailto:${t.raw.customer.email}`,class:"text-decoration-none"},s(t.raw.customer.email),9,Ee)]),"item.customer.phone":a(({item:t})=>[e("a",{href:`tel:${t.raw.customer.phone}`,class:"text-decoration-none"},s(t.raw.customer.phone),9,Le)]),"item.total":a(({item:t})=>[e("div",Me,[e("span",je,s(l(oe)(t.raw.total)),1)])]),"item.status":a(({item:t})=>[e("div",qe,[o(ue,null,{activator:a(({props:i})=>[o(F,_e({size:30},i,{color:l(B)(t.raw.status).variant,variant:"tonal"}),{default:a(()=>[o(d,{size:20,icon:l(B)(t.raw.status).icon},null,8,["icon"])]),_:2},1040,["color"])]),default:a(()=>[e("p",Fe,s(t.raw.status),1)]),_:2},1024)])]),"item.title":a(({item:t})=>[e("div",Ge,[e("a",{href:"javascript:;",onClick:i=>v.viewInvoice(t.raw.id)},s(t.raw.title),9,Qe)])]),"item.actions":a(({item:t})=>[o(Y,{density:"compact"},{default:a(()=>[o(d,{icon:"tabler-dots-vertical"}),o(me,{activator:"parent"},{default:a(()=>[o(pe,null,{default:a(()=>[o(p,{to:{name:"edit-invoice",params:{id:t.raw.id}}},{default:a(()=>[o(d,{icon:"tabler-pencil"}),_(" Edit Invoice ")]),_:2},1032,["to"]),t.raw.status!=="Paid"&&t.raw.payment_method.is_gateway?(u(),h(p,{key:0,onClick:i=>v.sendInvoice(t.raw)},{default:a(()=>[o(d,{icon:"tabler-send"}),_(" Send Invoice ")]),_:2},1032,["onClick"])):k("",!0),o(p,{href:t.raw.invoice_link,target:"_blank",rel:"noopener noreferrer",download:""},{default:a(()=>[o(d,{icon:"tabler-download"}),_(" Download Invoice ")]),_:2},1032,["href"]),o(p,{onClick:i=>v.viewInvoice(t.raw.id)},{default:a(()=>[o(d,{icon:"tabler-eye"}),_(" View Invoice ")]),_:2},1032,["onClick"]),l(q).can("Delete","invoices-delete")?(u(),h(p,{key:1,onClick:i=>v.deleteInvoiceConfirm(t.raw.id)},{default:a(()=>[o(d,{icon:"tabler-trash"}),_(" Delete Invoice ")]),_:2},1032,["onClick"])):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1},8,["modelValue","items-per-page","page","loading","items-length","headers","items"])]),_:1})]),_:1})])}}},ut=le(Ze,[["__scopeId","data-v-9c51a6fe"]]);export{ut as default};
