import{r as p,f as B,d as i,b as t,u as e,w as s,a as L,n as _,C as u,D as y,t as T,a6 as R,g as w,V as A,aR as N,e as D}from"./main-c40ee4ed.js";import{_ as F}from"./AppTextField-9867e25c.js";import{u as I}from"./auth-ab955ed6.js";import{u as P}from"./useAppAbility-d7266ddf.js";import{V as j,r as b,e as q}from"./VForm-48297921.js";import{V as M,b as U,a as V}from"./VCard-a375baf5.js";import{a as E,V as v}from"./VRow-db2c24e9.js";import{V as H}from"./VCheckbox-4209f72d.js";import"./VInput-135e03cb.js";import"./transition-127812ba.js";import"./VTextField-1b1d5e52.js";import"./forwardRefs-9d31fcaa.js";import"./VImg-3d39c17f.js";import"./axios-da837377.js";import"./parse-263515be.js";import"./index.m-120058be.js";import"./VAvatar-1c4c29a7.js";import"./VCheckboxBtn-609a0dc2.js";import"./VSelectionControl-84b50376.js";const J=`<svg width="238" height="238" viewBox="0 0 181 181" fill="none" xmlns="http://www.w3.org/2000/svg">
<rect x="1.30469" y="1.44312" width="178" height="178" rx="19" stroke="currentColor" stroke-opacity="0.16" stroke-width="2" stroke-dasharray="8 8"/>
<rect x="22.8047" y="22.9431" width="135" height="135" rx="10" fill="currentColor" fill-opacity="0.08"/>
</svg>
`,O=`<svg width="239" height="234" viewBox="0 0 239 234" fill="none" xmlns="http://www.w3.org/2000/svg">
<rect x="88.5605" y="0.700195" width="149" height="149" rx="19.5" stroke="currentColor" stroke-opacity="0.16"/>
<rect x="0.621094" y="33.761" width="200" height="200" rx="10" fill="currentColor" fill-opacity="0.08"/>
</svg>
`;const $={class:"layout-wrapper layout-blank"},W={class:"auth-wrapper d-flex align-center justify-center pa-4"},z={class:"position-relative my-sm-16"},G={class:"d-flex"},K={class:"text-h4 font-weight-semibold mb-1 text-center"},Q=i("p",{class:"mb-0 text-center"}," Please sign-in to your account ",-1),X={class:"d-flex align-center justify-space-between flex-wrap mt-2 mb-4"},ye={__name:"Login",setup(Y){const x=P(),n=p(!1),c=N(),{login:k,errors:f,respData:h,isBusy:C}=I(),r=p({email:"",password:"",remember:!1}),g=p(),S=()=>{var l;(l=g.value)==null||l.validate().then(async({valid:o})=>{if(o&&await k(r.value),h.value.status===200){const{accessToken:d,userData:m,userAbilities:a}=h.value.data;localStorage.setItem("userAbilities",JSON.stringify(a)),x.update(a),localStorage.setItem("userData",JSON.stringify(m)),localStorage.setItem("accessToken",d),router.replace(c.query.to?String(c.query.to):"/dashboard")}})};return(l,o)=>{const d=F,m=D("RouterLink");return L(),B("div",$,[i("div",W,[i("div",z,[t(e(u),{nodes:("h"in l?l.h:e(_))("div",{innerHTML:e(O)}),class:"text-primary auth-v1-top-shape d-none d-sm-block"},null,8,["nodes"]),t(e(u),{nodes:("h"in l?l.h:e(_))("div",{innerHTML:e(J)}),class:"text-primary auth-v1-bottom-shape d-none d-sm-block"},null,8,["nodes"]),t(M,{class:"auth-card pa-4","max-width":"448"},{default:s(()=>[t(U,{class:"justify-center"},{prepend:s(()=>[i("div",G,[t(e(u),{nodes:e(y).app.logo},null,8,["nodes"])])]),_:1}),t(V,{class:"pt-1"},{default:s(()=>[i("h4",K," Welcome to "+T(e(y).app.title)+"! ",1),Q]),_:1}),t(V,null,{default:s(()=>[t(e(j),{ref_key:"refVForm",ref:g,onSubmit:R(S,["prevent"])},{default:s(()=>[t(E,null,{default:s(()=>[t(v,{cols:"12"},{default:s(()=>[t(d,{modelValue:e(r).email,"onUpdate:modelValue":o[0]||(o[0]=a=>e(r).email=a),label:"Email",type:"email",autofocus:"",rules:[e(b),e(q)],"error-messages":e(f).email},null,8,["modelValue","rules","error-messages"])]),_:1}),t(v,{cols:"12"},{default:s(()=>[t(d,{modelValue:e(r).password,"onUpdate:modelValue":o[1]||(o[1]=a=>e(r).password=a),label:"Password",rules:[e(b)],type:e(n)?"text":"password","error-messages":e(f).password,"append-inner-icon":e(n)?"tabler-eye-off":"tabler-eye","onClick:appendInner":o[2]||(o[2]=a=>n.value=!e(n))},null,8,["modelValue","rules","type","error-messages","append-inner-icon"]),i("div",X,[t(H,{modelValue:e(r).remember,"onUpdate:modelValue":o[3]||(o[3]=a=>e(r).remember=a),label:"Remember me"},null,8,["modelValue"]),t(m,{class:"text-primary ms-2 mb-1",to:{name:"forgot-password"}},{default:s(()=>[w(" Forgot Password? ")]),_:1})]),t(A,{block:"",type:"submit",loading:e(C)},{default:s(()=>[w(" Login ")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})])])])}}};export{ye as default};
